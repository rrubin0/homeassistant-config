#####################################################################
###  Away Mode
#####################################################################
script:
  away:
    alias: "Away Mode"
    sequence:
    ### lock the doors
    - service: lock.lock
      entity_id: all

    ### turn off all lights (except porch) and devices
    - service: homeassistant.turn_off
      entity_id:
        - group.interior_lights
        - group.exterior_lights
        - group.outlets
        - fan.patio_fan

    ### set climate away mode
    - service: climate.set_preset_mode
      data:
        entity_id: climate.downstairs
        preset_mode: 'Away'

    - service: climate.set_preset_mode
      data:
        entity_id: climate.upstairs
        preset_mode: 'Away'

    ### send notification
    - service: notify.mobile_app_rip8plus
      data:
        title: "Away Mode ON"
        message: "Away mode is ON."

    - condition: state
      entity_id: switch.tv_power
      state: 'on'

    - service: switch.turn_off
      entity_id: switch.tv_power
      